(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-257b01d0"],{1225:function(e,t,i){"use strict";i("c13d")},"71d9":function(e,t,i){"use strict";i("74ce")},"74ce":function(e,t,i){},c13d:function(e,t,i){},cbe3:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("piaf-breadcrumb"),e._v(" "),i("b-tabs",e._l(e.currentCompanies,(function(t,s){return i("b-tab",{key:s,attrs:{title:t.name}},[i("TableRegion",{attrs:{inserted:e.inserted,company:t,i:s}}),e._v(" "),i("RegionModal",{attrs:{action:"insert",company:t,i:s},on:{"data:inserted":function(t){e.inserted=!e.inserted}}})],1)})),1)],1)},n=[],a=i("5530"),r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.company.addresses.isLoading?i("div",{staticClass:"inner"},[i("div",{staticClass:"loading"})]):e.errorAdresses.status?i("div",{staticClass:"text-center w-100"},[e._v("\n    "+e._s(e.errorAdresses.text)+"\n  ")]):i("b-row",[i("b-colxx",{attrs:{xxs:"12"}},[i("b-card",[i("div",{staticClass:"top-right-button-container"},[i("b-button",{staticClass:"top-right-button",attrs:{variant:"primary",size:"lg"},on:{click:function(t){return e.$bvModal.show("insert-regions-"+e.i)}}},[e._v(e._s(e.$t("regions.newRegion")))]),e._v(" "),i("b-button-group",[i("b-dropdown",{staticClass:"check-button",attrs:{split:"",right:"",variant:"primary"},on:{click:function(t){return e.selectAll(!0)}}},[i("label",{staticClass:"custom-control custom-checkbox pl-4 mb-0 d-inline-block",attrs:{slot:"button-content"},slot:"button-content"},[i("input",{directives:[{name:"shortkey",rawName:"v-shortkey",value:{select:["ctrl","a"],undo:["ctrl","d"],space:["space"]},expression:"{ select: ['ctrl', 'a'], undo: ['ctrl', 'd'], space: ['space'] }"}],staticClass:"custom-control-input",attrs:{type:"checkbox"},domProps:{checked:e.isSelectedAll},on:{shortkey:e.keymap}}),e._v(" "),i("span",{class:{"custom-control-label":!0,indeterminate:e.isAnyItemSelected}},[e._v("Â ")])]),e._v(" "),i("b-dropdown-item",{attrs:{disabled:0==e.selectedItems.length},on:{click:function(t){return e.onConfirm(1,"isOnline")}}},[e._v(e._s(e.$t("regions.multiDoOnline",{length:e.selectedItems.length})))]),e._v(" "),i("b-dropdown-item",{attrs:{disabled:0==e.selectedItems.length},on:{click:function(t){return e.onConfirm(0,"isOnline")}}},[e._v(e._s(e.$t("regions.multiDoOffline",{length:e.selectedItems.length})))]),e._v(" "),i("b-dropdown-item",{attrs:{disabled:0==e.selectedItems.length},on:{click:function(t){return e.onConfirm(0,"isActive")}}},[e._v(e._s(e.$t("regions.multiDoRemove",{length:e.selectedItems.length})))])],1)],1)],1),e._v(" "),i("div",{staticClass:"mb-4 d-none d-lg-block"},[i("h5",[e._v(e._s(e.$t("general.filter")))]),e._v(" "),i("b-button-group",{attrs:{variant:"outline-primary",size:"xs"}},[i("b-button",{attrs:{size:"xs",pill:"",variant:1==e.filterItem.data&&"isActive"==e.filterItem.type?"primary":"outline-primary"},on:{click:function(t){e.filterItem={search:e.filterItem.search,type:"isActive",data:1,mainRegion:e.filterItem.mainRegion,regionFilter:e.filterItem.regionFilter}}}},[e._v(e._s(e.$t("regions.allRegion"))+" ("+e._s(e.setCount(-1))+") ")]),e._v(" "),i("b-button",{attrs:{size:"xs",pill:"",variant:1==e.filterItem.data&&"isOnline"==e.filterItem.type?"primary":"outline-primary"},on:{click:function(t){e.filterItem={search:e.filterItem.search,type:"isOnline",data:1,mainRegion:e.filterItem.mainRegion,regionFilter:e.filterItem.regionFilter}}}},[e._v(e._s(e.$t("regions.onlyOnline"))+" ("+e._s(e.setCount(1))+") ")]),e._v(" "),i("b-button",{attrs:{size:"xs",pill:"",variant:0==e.filterItem.data&&"isOnline"==e.filterItem.type?"primary":"outline-primary"},on:{click:function(t){e.filterItem={search:e.filterItem.search,type:"isOnline",data:0,mainRegion:e.filterItem.mainRegion,regionFilter:e.filterItem.regionFilter}}}},[e._v(e._s(e.$t("regions.onlyOffline"))+"  ("+e._s(e.setCount(0))+")")])],1)],1),e._v(" "),i("div",{staticClass:"my-4 d-lg-none"},[i("b-button",{class:e.filterMobile?null:"collapsed",attrs:{size:"xs","aria-expanded":e.filterMobile?"true":"false","aria-controls":"collapse-4"},on:{click:function(t){e.filterMobile=!e.filterMobile}}},[e._v("\n    "+e._s(e.$t("general.filter"))+" "),i("i",{class:"simple-icon-arrow-"+(e.filterMobile?"down":"right")+" ml-2"})]),e._v(" "),i("b-collapse",{staticClass:"mt-2",attrs:{id:"collapse-4"},model:{value:e.filterMobile,callback:function(t){e.filterMobile=t},expression:"filterMobile"}},[i("b-card",[i("b-button-group",{attrs:{variant:"outline-primary",size:"xs"}},[i("b-button",{staticClass:"m-1",attrs:{size:"xs",pill:"",variant:"outline-"+(1==e.filterItem.data&&"isActive"==e.filterItem.type?"success":"danger")},on:{click:function(t){e.filterItem={search:e.filterItem.search,type:"isActive",data:1,mainRegion:e.filterItem.mainRegion,regionFilter:e.filterItem.regionFilter}}}},[e._v(e._s(e.$t("regions.allRegion"))+" ")]),e._v(" "),i("b-button",{staticClass:"m-1",attrs:{size:"xs",pill:"",variant:"outline-"+(1==e.filterItem.data&&"isOnline"==e.filterItem.type?"success":"danger")},on:{click:function(t){e.filterItem={search:e.filterItem.search,type:"isOnline",data:1,mainRegion:e.filterItem.mainRegion,regionFilter:e.filterItem.regionFilter}}}},[e._v(e._s(e.$t("regions.onlyOnline"))+" ")]),e._v(" "),i("b-button",{staticClass:"m-1",attrs:{size:"xs",pill:"",variant:"outline-"+(0==e.filterItem.data&&"isOnline"==e.filterItem.type?"success":"danger")},on:{click:function(t){e.filterItem={search:e.filterItem.search,type:"isOnline",data:0,mainRegion:e.filterItem.mainRegion,regionFilter:e.filterItem.regionFilter}}}},[e._v(e._s(e.$t("regions.onlyOffline"))+" ")])],1)],1)],1)],1),e._v(" "),i("b-row",[i("b-colxx",{attrs:{sm:"12",md:4,lg:3}},[i("label",{attrs:{for:""}},[e._v(e._s(e.$t("regions.filterForMainRegion")))]),e._v(" "),i("v-select",{attrs:{size:"xs",label:"mainRegion",options:e.allMainRegions,placeholder:e.$t("regions.mainRegionsPlaceholder")},scopedSlots:e._u([{key:"option",fn:function(t){return[e._v("\n                          "+e._s(t.mainRegion)+"\n                      ")]}},{key:"no-options",fn:function(t){var s=t.search;return[i("span",""!=s?[e._v("\n      "+e._s(e.$t("error.searchNodata",{search:s})))]:[e._v(" "+e._s(e.$t("error.empty")))])]}}]),model:{value:e.filterItem,callback:function(t){e.filterItem=t},expression:"filterItem"}})],1),e._v(" "),i("b-colxx",{staticClass:"mt-4",attrs:{sm:"12",md:4,lg:3}},[i("div",{staticClass:"search mt-1 w-100 d-inline-block float-md-left mr-1 align-top"},[i("b-input",{staticClass:"rounded",attrs:{placeholder:e.$t("regions.searchName"),size:"xs"},on:{input:function(t){return e.filterItem.search=t}}})],1)]),e._v(" "),""!=e.filterItem.search||e.filterItem.regionFilter||"isActive"!=e.filterItem.type?i("b-colxx",{staticClass:"text-right mt-4",attrs:{sm:"12",md:4,lg:3}},[i("b-button",{attrs:{block:"",variant:"outline-primary"},on:{click:function(t){e.filterItem={search:"",regionFilter:!1,type:"isActive",data:1,mainRegion:e.$t("regions.chooseAllRegions")}}}},[e._v(e._s(e.$t("general.cleanFilter")))])],1):e._e()],1),e._v(" "),i("h3",{staticClass:"text-right my-4"},[e._v(e._s(e.$t("regions.title",{length:e.addresses.length})))]),e._v(" "),e._l(e.addresses,(function(t,s){return i("CardList",{key:s,staticClass:"my-4",attrs:{paymentIndex:s,selectedItems:e.selectedItems,data:t,company:e.company,i:e.i},on:{"edit:item":e.setEditItem,"toggle-item":e.toggleItem}})})),e._v(" "),0==e.addresses.length?i("div",{staticClass:"mt-4 text-center"},[i("hr"),e._v("\n          "+e._s(e.$t("error.empty"))+"\n        ")]):e._e()],2)],1)],1),e._v(" "),i("v-contextmenu",{ref:"contextmenu"},[i("v-contextmenu-item",{on:{click:function(t){return e.onContextMenuAction("copy")}}},[i("i",{staticClass:"simple-icon-docs"}),e._v(" "),i("span",[e._v("Copy")])]),e._v(" "),i("v-contextmenu-item",{on:{click:function(t){return e.onContextMenuAction("move-to-archive")}}},[i("i",{staticClass:"simple-icon-drawer"}),e._v(" "),i("span",[e._v("Move to archive")])]),e._v(" "),i("v-contextmenu-item",{on:{click:function(t){return e.onContextMenuAction("delete")}}},[i("i",{staticClass:"simple-icon-trash"}),e._v(" "),i("span",[e._v("Delete")])])],1),e._v(" "),i("RegionModal",{attrs:{action:"edit",company:e.company,i:e.i,item:e.editItem},on:{"data:updated":e.setUpdateRegion}}),e._v(" "),i("b-modal",{attrs:{id:"multi-action-update","hide-header":"","no-close-on-backdrop":"","hide-footer":"",centered:""}},[e.multiUpdateLoading?i("div",{staticClass:"inner"},[i("div",{staticClass:"loading"})]):i("div",{staticClass:"text-center"},[i("i",{staticClass:"simple-icon-check text-success",staticStyle:{"font-size":"32px"}})]),e._v(" "),i("div",{staticClass:"text-center"},[e._v("\n      "+e._s(e.$t("regions.multiActionProcessing",{success:e.successMultiActions,length:e.selectedItems.length}))+"\n    ")]),e._v(" "),i("div",{staticClass:"mt-4 text-center"},[i("small",[e._v(e._s(e.$t("alertMessage.autoCloseActionProcess")))])])])],1)},o=[],c=i("1da1"),l=i("2909"),d=i("ade3"),m=(i("96cf"),i("4de4"),i("caad"),i("2532"),i("ac1f"),i("841c"),i("99af"),i("159b"),i("d81d"),i("fb6a"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-modal",{attrs:{"hide-footer":"",centered:"",id:e.action+"-regions-"+e.i,title:e.$t("regions.newRegionTitle",{company:e.company.name})},on:{show:e.setFormItem}},[i("b-card",["edit"==e.action?i("b-alert",{attrs:{show:"",variant:"warning"}},[i("small",{domProps:{innerHTML:e._s(e.$t("regions.editTownError"))}})]):e._e(),e._v(" "),e.alertType.status?i("b-alert",{attrs:{show:"",variant:e.alertType.variant}},[e._v(e._s(e.$t("alertMessage."+e.alertType.text)))]):e._e(),e._v(" "),i("b-form-group",{attrs:{label:e.$t("regions.chooseRegionOrTown")},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.ariaDescribedby;return[i("b-form-radio",{attrs:{disabled:"edit"==e.action,"aria-describedby":s,name:"some-radios",value:0},on:{change:e.changedRadio},model:{value:e.regionOrTown,callback:function(t){e.regionOrTown=t},expression:"regionOrTown"}},[e._v(e._s(e.$t("regions.takeOrderFromRegion")))]),e._v(" "),i("b-form-radio",{attrs:{disabled:"edit"==e.action,"aria-describedby":s,name:"some-radios",value:1},on:{change:e.changedRadio},model:{value:e.regionOrTown,callback:function(t){e.regionOrTown=t},expression:"regionOrTown"}},[e._v(e._s(e.$t("regions.takeOrderFromTown")))])]}}])}),e._v(" "),i("label",{attrs:{for:"select"}},[e._v(e._s(0==e.regionOrTown?e.$t("regions.searchRegion"):e.$t("regions.searchTown")))]),e._v(" "),i("v-select",{key:"single-select-preview",attrs:{disabled:"edit"==e.action,inputId:"search-town",label:"name",placeholder:0==e.regionOrTown?e.$t("regions.searchRegion"):e.$t("regions.searchTown"),options:e.answers},on:{"search:blur":e.cancelSearch,search:function(){var t=[],i=arguments.length;while(i--)t[i]=arguments[i];return e.searchTowns.apply(void 0,t.concat([e.regionOrTown]))}},scopedSlots:e._u([{key:"no-options",fn:function(t){var s=t.search;return[i("span",""!=s?[e._v(" "+e._s(e.$t("error.searchNodata",{search:s})))]:[e._v(" "+e._s(e.$t("error.empty")))])]}}]),model:{value:e.townObject,callback:function(t){e.townObject=t},expression:"townObject"}}),e._v(" "),e.$v.form.townId.required?e._e():i("small",{staticClass:"text-danger"},[e._v(e._s(e.$t("validation.required")))]),e._v(" "),i("div",{staticClass:"mt-4"},[i("b-form-group",{staticClass:"has-float-label mb-4",attrs:{label:e.$t("regions.minPrice")}},[i("b-input-group",{attrs:{append:e.$t("general.priceType")}},[i("b-form-input",{attrs:{type:"number",state:e.$v.form.minPrice.$invalid},model:{value:e.form.minPrice,callback:function(t){e.$set(e.form,"minPrice",e._n(t))},expression:"form.minPrice"}})],1),e._v(" "),e.$v.form.minPrice.required?e._e():i("small",{staticClass:"text-danger"},[e._v(e._s(e.$t("validation.required")))]),e._v(" "),e.$v.form.minPrice.mustBeUp0?e._e():i("small",{staticClass:"text-danger"},[e._v(e._s(e.$t("validation.mustBeUp",{number:0,title:e.$t("regions.minPrice")})))])],1),e._v(" "),i("b-form-group",{staticClass:"has-float-label mb-4",attrs:{label:e.$t("regions.serviceTimeMin")}},[i("b-input-group",{attrs:{append:e.$t("general.timeType")}},[i("b-form-input",{attrs:{type:"number"},on:{blur:function(t){e.form.serviceTimeMax=Number(e.form.serviceTimeMin)+10}},model:{value:e.form.serviceTimeMin,callback:function(t){e.$set(e.form,"serviceTimeMin",e._n(t))},expression:"form.serviceTimeMin"}})],1),e._v(" "),e.$v.form.serviceTimeMin.required?e._e():i("small",{staticClass:"text-danger"},[e._v(e._s(e.$t("validation.required")))]),e._v(" "),e.$v.form.serviceTimeMin.mustBeUp10?e._e():i("small",{staticClass:"text-danger"},[e._v(e._s(e.$t("validation.mustBeUp",{number:10,title:e.$t("regions.serviceTimeMin")})))])],1),e._v(" "),i("b-form-group",{staticClass:"has-float-label mb-4",attrs:{label:e.$t("regions.serviceTimeMax")}},[i("b-input-group",{attrs:{append:e.$t("general.timeType")}},[i("b-form-input",{attrs:{disabled:"",type:"number"},model:{value:e.form.serviceTimeMax,callback:function(t){e.$set(e.form,"serviceTimeMax",e._n(t))},expression:"form.serviceTimeMax"}})],1)],1),e._v(" "),1!=e.company.parentId?i("b-form-group",{staticClass:"has-float-label mb-4",attrs:{label:e.$t("regions.servicePrice")}},[i("b-input-group",{attrs:{append:e.$t("general.priceType")}},[i("b-form-input",{attrs:{type:"number"},model:{value:e.form.servicePrice,callback:function(t){e.$set(e.form,"servicePrice",e._n(t))},expression:"form.servicePrice"}})],1)],1):e._e(),e._v(" "),i("div",{staticClass:"mt-4 text-right"},[i("b-button",{attrs:{variant:"danger"},on:{click:function(t){return e.$bvModal.hide(e.action+"-regions-"+e.i)}}},[e._v(e._s(e.$t("general.close")))]),e._v(" "),i("b-button",{class:{"btn-multiple-state btn-shadow":!0,"show-spinner":e.isLoading},attrs:{disabled:e.isLoading||e.isLoadingEditItem,variant:"primary"},on:{click:function(t){return e.middleware()}}},[e._v(e._s(e.isLoadingEditItem?e.$t("general.pleaseWaitAsync"):e.$t("general.submit")))])],1)],1)],1)],1)}),u=[],g=(i("b0c0"),i("4a7a")),p=i.n(g),v=(i("6dfc"),i("1dce")),h=i("b5ae"),f=h.required,b=(h.maxLength,h.minLength,h.email,function(e){return e>=10}),_=function(e){return e>=0},y={components:{vSelect:p.a},name:"RegionModal",mixins:[v["validationMixin"]],validations:{form:{serviceTimeMin:{required:f,mustBeUp10:b},minPrice:{required:f,mustBeUp0:_},townId:{required:f},serviceTimeMax:{required:f}}},props:{company:{default:function(){}},i:{default:-1},action:{default:"insert"},item:{default:function(){return{status:!1,index:-1}}}},data:function(){return{isLoadingEditItem:!1,alertType:{status:!1},townObject:null,isLoading:!1,form:{townId:null,minPrice:0,serviceTimeMin:10,serviceTimeMax:20},regionOrTown:0,answers:[],settimout:-1}},watch:{townObject:{deep:!0,handler:function(e){null!=e&&(this.form.townId=e.id)}}},methods:{setFormItem:function(){var e=this;console.log(this.action,this.item),"edit"==this.action&&this.item.status&&(this.isLoadingEditItem=!0,this.regionOrTown=null==this.item.data.street?0:1,this.form={townId:this.item.data.townId,minPrice:this.item.data.minPrice,serviceTimeMax:this.item.data.serviceTimeMax,serviceTimeMin:this.item.data.serviceTimeMin,servicePrice:this.item.data.servicePrice},setTimeout(Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.searchTowns(e.item.data.name,(function(){return!1}),e.regionOrTown,!0);case 2:case"end":return t.stop()}}),t)}))),250))},middleware:function(){"insert"==this.action?this.sendNewRegion():this.sendUpdateRegion()},toast:function(e,t,i){this.counter++,this.$bvToast.toast(t,{title:e,variant:i,toaster:"b-toaster-top-center",solid:!0})},sendUpdateRegion:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.alertType={status:!1},e.$v.form.$touch(),!(e.$v.form.$invalid||1!=e.company.parentId&&e.form.servicePrice<0)){t.next=4;break}return t.abrupt("return");case 4:return e.isLoading=!0,t.next=7,e.$api.post("companyAdress/putCompanyAdress",Object(a["a"])(Object(a["a"])({},e.form),{},{id:e.item.data.id,companyId:e.company.id}));case 7:i=t.sent,"OK"==i.status?(e.alertType={status:!0,variant:"success",text:"updateSuccess"},e.toast(e.$t("alertMessage.success"),e.$t("alertMessage.updateSuccess"),"success"),console.log(e.item,"item"),e.$emit("data:updated",{index:e.item.index,companyIndex:e.i,data:Object(a["a"])(Object(a["a"])({},e.item.data),e.form)}),e.$bvModal.hide("edit-regions-"+e.i)):"REGISTERED"==i.status?(e.toast(e.$t("alertMessage.error"),e.$t("alertMessage.registeredRegion"),"danger"),e.alertType={status:!0,variant:"danger",text:"registeredRegion"}):(e.toast(e.$t("alertMessage.error"),e.$t("alertMessage.error500"),"danger"),e.alertType={status:!0,variant:"danger",text:"error500"}),e.isLoading=!1;case 10:case"end":return t.stop()}}),t)})))()},sendNewRegion:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.alertType={status:!1},e.$v.form.$touch(),!e.$v.form.$invalid){t.next=4;break}return t.abrupt("return");case 4:return e.isLoading=!0,t.next=7,e.$api.post("companyAdress/addCompanyAdress",Object(a["a"])(Object(a["a"])({},e.form),{},{companyId:e.company.id}));case 7:i=t.sent,"OK"==i.status?(e.alertType={status:!0,variant:"success",text:"insertSuccess"},e.toast(e.$t("alertMessage.success"),e.$t("alertMessage.insertSuccess"),"success"),e.$emit("data:inserted"),e.$bvModal.hide("new-regions-"+e.i)):"REGISTERED"==i.status?(e.toast(e.$t("alertMessage.error"),e.$t("alertMessage.registeredRegion"),"danger"),e.alertType={status:!0,variant:"danger",text:"registeredRegion"}):(e.toast(e.$t("alertMessage.error"),e.$t("alertMessage.error500"),"danger"),e.alertType={status:!0,variant:"danger",text:"error500"}),e.isLoading=!1;case 10:case"end":return t.stop()}}),t)})))()},cancelSearch:function(){console.log("search"),clearTimeout(this.settimout)},changedRadio:function(){console.log("changed"),this.answers=[],this.townObject=null},searchTowns:function(e,t,i,s){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t(!0),-1!=n.settimout&&clearTimeout(n.settimout),a={search:e,cityId:35,field:"name,street,town"},0==n.regionOrTown&&(a={search:e,cityId:35,field:"name,street,town",parentId:n.regionOrTown}),n.settimout=setTimeout(Object(c["a"])(regeneratorRuntime.mark((function i(){var r,o,c;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(""==e){i.next=5;break}return i.next=3,n.$api.nts("getAllTown",a);case 3:r=i.sent,"OK"==r.status?n.answers=r.data:n.answers=[];case 5:t(!1),console.log(s),s&&(o=document.getElementById("search-town"),c=n.answers.map((function(e){return e.name})).indexOf(n.item.data.name),console.log(c),-1!=c?n.townObject=n.answers[c]:o.value="",o.placeholder=0==n.regionOrTown?n.$t("regions.searchRegion"):n.$t("regions.searchTown"),n.isLoadingEditItem=!1);case 8:case"end":return i.stop()}}),i)}))),1e3),i.abrupt("return");case 6:case"end":return i.stop()}}),i)})))()}}},$=y,w=i("2877"),x=Object(w["a"])($,m,u,!1,null,null,null),I=x.exports,C=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-card",{class:{"d-flex flex-row":!0,active:e.selectedItems.includes(e.data.id),"active-product":1==e.data.isOnline,"close-product":0==e.data.isOnline},attrs:{"no-body":""},on:{click:function(t){return t.preventDefault(),e.toggleItem(t,e.data.id)}}},[i("list-actions",{attrs:{paymentIndex:e.paymentIndex,company:e.company,i:e.i,selectedItems:e.selectedItems,data:e.data},on:{edit:function(t){return e.$emit("edit:item",t)}}})],1)},M=[],R=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"pl-2 d-flex flex-grow-1 min-width-zero"},[i("div",{staticClass:"card-body align-self-center d-flex flex-column flex-lg-row justify-content-between min-width-zero align-items-lg-center"},[i("div",{staticClass:"w-15 w-sm-100"},[i("div",[i("small",[e._v(e._s(e.$t("regions.status")))])]),e._v(" "),i("b-badge",{attrs:{pill:"",variant:0==e.data.isOnline?"outline-danger":"success"}},[e._v("\n                "+e._s(e.data.isOnline?e.$t("companyDetail.active"):e.$t("companyDetail.offline")))])],1),e._v(" "),i("div",{staticClass:"w-15 w-sm-100"},[i("div",[i("small",[e._v(e._s(e.$t("regions.town")))])]),e._v(" "),i("strong",[e._v(e._s(e.data.town))])]),e._v(" "),i("div",{staticClass:"w-25 w-sm-100"},[i("div",[i("small",{staticClass:"text-muted"},[e._v(e._s(e.$t("regions.street")))])]),e._v(" "),i("strong",[e._v(e._s(e.data.street))])]),e._v(" "),i("div",{staticClass:"w-15 w-sm-100"},[i("div",[i("small",{staticClass:"text-muted"},[e._v(e._s(e.$t("regions.minPrice")))])]),e._v(" "),i("strong",[e._v(e._s(e.data.minPrice.toFixed(2))+" TL")])]),e._v(" "),i("div",{staticClass:"w-15 w-sm-100"},[i("div",[i("small",{staticClass:"text-muted"},[e._v(e._s(e.$t("regions.serviceTime")))])]),e._v(" "),null==e.data.serviceTimeMax?i("small",[e._v(e._s(e.$t("regions.noPrice")))]):i("strong",[e._v(" "+e._s(e.data.serviceTimeMin)+" - "+e._s(e.data.serviceTimeMax)+" dk")])]),e._v(" "),1!=e.company.parentId?i("div",{staticClass:"w-15 w-sm-100"},[i("div",[i("small",{staticClass:"text-muted"},[e._v(e._s(e.$t("regions.servicePrice")))])]),e._v(" "),null==e.data.servicePrice?i("small",[e._v(e._s(e.$t("regions.noPrice")))]):i("strong",[e._v(" "+e._s(e.data.servicePrice)+" TL")])]):e._e(),e._v(" "),i("div",{staticClass:"w-15 w-sm-100"},[i("div",[i("small",[e._v(e._s(e.$t("regions.city")))])]),e._v(" "),i("strong",[e._v("  "+e._s(e.data.city.charAt(0).toLocaleUpperCase())+e._s(e.data.city.slice(1)))])]),e._v(" "),i("div",{staticClass:"w-15 w-sm-100"},[i("dropdown-actions",{attrs:{"payment-index":e.paymentIndex,company:e.company,i:e.i,data:e.data},on:{edit:function(t){return e.$emit("edit",t)}}})],1)]),e._v(" "),i("div",{staticClass:"custom-control custom-checkbox pl-1 align-self-center pr-4"},[i("b-form-checkbox",{staticClass:"itemCheck mb-0",attrs:{checked:e.selectedItems.includes(e.data.id)}})],1)])},T=[],k=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("b-dropdown",{staticClass:"m-md-2",attrs:{size:e.size?e.size:"md",id:"dropdown-1",text:e.$t("pages.actions")}},[i("b-dropdown-item",{on:{click:function(t){return e.$emit("edit",{index:e.paymentIndex,item:e.data})}}},[e._v(e._s(e.$t("general.edit")))]),e._v(" "),i("b-dropdown-item",{attrs:{variant:1==e.data.isOnline?"danger":"success"},on:{click:function(t){return e.setItem("isOnline",1==e.data.isOnline?0:1,e.data.id)}}},[e._v(" "+e._s(e.$t("regions."+(1==e.data.isOnline?"closeOfOrder":"openOfOrder")))+"        \n      ")]),e._v(" "),i("b-dropdown-divider"),e._v(" "),i("b-dropdown-item",{attrs:{variant:1==e.data.isActive?"danger":"success"},on:{click:function(t){return e.setItem("isActive",1==e.data.isActive?0:1,e.data.id)}}},[e._v(" "+e._s(e.$t("general."+(1==e.data.isActive?"remove":"doActive"))))])],1),e._v(" "),e.show?i("div",[i("b-modal",{attrs:{"ok-disabled":e.alert.status||e.isLoading,"ok-title":e.isLoading?e.$t("general.isLoading"):e.$t("general.update"),"cancel-title":e.$t("general.close"),"ok-variant":"warning",title:e.$t("workers.updateRegion"),id:"region-update-action",centered:""},on:{ok:e.setUpdateProduct,hidden:function(t){e.show=!1}}},[i("div",{staticClass:"text-center"},[1==e.updateData.isActive?i("strong",{domProps:{innerHTML:e._s(e.$t("workers.isActiveDescription1"))}}):i("strong",{domProps:{innerHTML:e._s(e.$t("workers.isActiveDescription0"))}})])])],1):e._e()],1)},O=[],A={props:["data","company","i","paymentIndex","size"],data:function(){return{isLoading:!1,show:!1,inc:[],dec:[],updateData:{},alert:{status:!1,text:""}}},watch:{"updateData.discount":function(e){this.alert=e<0?{status:!0,text:this.$t("products.alert.mustBeUp0Discount")}:e>100?{status:!0,text:this.$t("products.alert.mustBeDown100Discount")}:{status:!1}},"updateData.price":function(e){this.alert=e<0?{status:!0,text:this.$t("products.alert.mustBeUp0Price")}:{status:!1}}},methods:{toast:function(e,t,i){this.counter++,this.$bvToast.toast(t,{title:e,variant:i,toaster:"b-toaster-top-center",solid:!0})},apiResponse:function(e,t){"OK"==e.status?(this.$bvModal.hide("region-update-action"),this.$emit("successUpdate",t),this.$store.commit("setUpdateRegion",{data:Object(a["a"])(Object(a["a"])({},this.data),t),companyIndex:this.i,index:this.paymentIndex,toast:{func:this.$bvToast,data:{title:this.$t("alertMessage.success"),content:this.$t("alertMessage.updateSuccess"),variant:"success"}}}),this.toast(this.$t("alertMessage.success"),this.$t("alertMessage.updateSuccess"),"success")):"REGISTERED"==e.status?this.toast(this.$t("alertMessage.error"),this.$t("alertMessage.registered"),"danger"):this.toast(this.$t("alertMessage.error"),this.$t("alertMessage.error500"),"danger")},setUpdateProduct:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function i(){var s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t.isLoading=!0,e.preventDefault(),i.next=4,t.$api.post("companyAdress/putCompanyAdress",t.updateData);case 4:s=i.sent,t.apiResponse(s,t.updateData),t.isLoading=!1;case 7:case"end":return i.stop()}}),i)})))()},setItem:function(e,t,i){var s,n=this;this.show=!0,this.updateData=(s={},Object(d["a"])(s,e,t),Object(d["a"])(s,"id",i),Object(d["a"])(s,"companyId",this.company.id),s),console.log("herere"),setTimeout((function(){n.$bvModal.show("region-update-action")}),250)}}},L=A,P=Object(w["a"])(L,k,O,!1,null,null,null),j=P.exports,F=i("7869"),E={components:{DropdownActions:j},props:["data","selectedItems","company","i","paymentIndex"],methods:{dataFormatterNaApiWithTime:F["a"]}},D=E,U=Object(w["a"])(D,R,T,!1,null,null,null),S=U.exports,z={components:{listActions:S},computed:{returnName:function(){return this.data.name.charAt(0).toLocaleUpperCase()}},props:["data","selectedItems","company","i","paymentIndex"],data:function(){return{isLoading:!0}},methods:{toggleItem:function(e,t){console.log("here",e,t),this.$emit("toggle-item",e,t)}}},B=z,q=(i("1225"),Object(w["a"])(B,C,M,!1,null,null,null)),N=q.exports,K=function(e,t){return e.reduce((function(e,i){return(e[i[t]]=e[i[t]]||[]).push(i),e}),[])},H={props:{company:{default:function(){}},i:{default:-1},inserted:{type:Boolean}},watch:{inserted:function(){this.initCompanyAddress()},"company.addresses.isLoading":function(e){e||this.setMainRegions()}},components:{RegionModal:I,CardList:N,vSelect:p.a},data:function(){return{allMainRegions:[],successMultiActions:0,multiUpdateLoading:!1,selectedItems:[],filter:{show:-1},filterMobile:!1,filterItem:{search:"",regionFilter:!1,type:"isActive",data:1,mainRegion:this.$t("regions.chooseAllRegions")},editItem:{status:!1,data:{},index:-1},errorAdresses:{status:!1,text:this.$t("error.empty")},isLoading:!0,pageCount:1,items:[],fields:[{key:"action",label:this.$t("regions.status")},{key:"name",label:this.$t("regions.town"),sortable:!0},{key:"minPrice",label:this.$t("regions.minPrice"),sortable:!0},{key:"servicePrice",label:this.$t("regions.servicePrice"),sortable:!0},{key:"serviceTime",label:this.$t("regions.serviceTime"),sortable:!0},{key:"town",label:this.$t("regions.region"),sortable:!0},{key:"street",label:this.$t("regions.street"),sortable:!0},{key:"city",label:this.$t("regions.city"),sortable:!0},{key:"isActive",label:this.$t("regions.action")}]}},computed:{addresses:function(){var e=this;if(0==this.company.addresses.isLoading){if(this.filterItem.regionFilter)return this.company.addresses.data.filter((function(t){return t.town==e.filterItem.mainRegion&&t[e.filterItem.type]==e.filterItem.data&&(t.town.toLowerCase().includes(e.filterItem.search.toLowerCase())||t.street.toLowerCase().includes(e.filterItem.search.toLowerCase()))}));if(!this.filterItem.regionFilter)return this.company.addresses.data.filter((function(t){return t[e.filterItem.type]==e.filterItem.data&&(t.town.toLowerCase().includes(e.filterItem.search.toLowerCase())||t.street.toLowerCase().includes(e.filterItem.search.toLowerCase()))}))}},isSelectedAll:function(){return this.selectedItems.length>=this.addresses.length},isAnyItemSelected:function(){return this.selectedItems.length>0&&this.selectedItems.length<this.addresses.length}},methods:{onConfirm:function(e,t,i){var s=this,n=this.$createElement,a=n("div",{domProps:{innerHTML:this.$t("regions.".concat(t,"Description").concat(e))}});this.$bvModal.msgBoxConfirm(a,{size:"md",buttonSize:"sm",okVariant:"warning",cancelVariant:"danger",okTitle:this.$t("general.submit"),cancelTitle:this.$t("general.close"),footerClass:"p-2",hideFooter:!0,hideHeader:!0,centered:!0}).then((function(n){n&&s.multiRegionsAction(e,t,i)}))},multiRegionsAction:function(e,t){var i=this;console.log(e),this.$bvModal.show("multi-action-update"),this.multiUpdateLoading=!0,this.successMultiActions=0,this.selectedItems.forEach((function(s,n){console.log(s);var a=i.company.addresses.data.map((function(e){return e.id})).indexOf(s);console.log(a),i.sendUpdateRegionAction(a,s,Object(d["a"])({},t,e),i.company.addresses.data[a]),i.selectedItems.length-1==n&&(i.multiUpdateLoading=!1,setTimeout((function(){i.$bvModal.hide("multi-action-update")}),2500))}))},selectAll:function(e){this.selectedItems.length>=this.addresses.length?e&&(this.selectedItems=[]):this.selectedItems=this.addresses.map((function(e){return e.id}))},keymap:function(e){switch(console.log(e),e.srcKey){case"select":this.selectAll(!1);break;case"undo":this.selectedItems=[];break;case"space":0!=this.selectedItems.length&&this.onConfirm(1,"isOnline");break}},toggleItem:function(e,t){if(console.log("worked"),e.shiftKey&&this.selectedItems.length>0){var i,s=this.addresses,n=this.getIndex(t,s,"id"),a=this.getIndex(this.selectedItems[this.selectedItems.length-1],s,"id");s=s.slice(Math.min(n,a),Math.max(n,a)+1),(i=this.selectedItems).push.apply(i,Object(l["a"])(s.map((function(e){return e.id}))))}else this.selectedItems.includes(t)?this.selectedItems=this.selectedItems.filter((function(e){return e!==t})):this.selectedItems.push(t)},setCount:function(e){var t=this;return-1!=e||this.filterItem.regionFilter?-1==e&&this.filterItem.regionFilter?this.company.addresses.data.filter((function(e){return e.town==t.filterItem.mainRegion})).length:this.filterItem.regionFilter?this.company.addresses.data.filter((function(i){return i.town==t.filterItem.mainRegion&&i.isOnline==e})).length:this.company.addresses.data.filter((function(t){return t.isOnline==e})).length:this.company.addresses.data.length},toast:function(e,t,i){this.counter++,this.$bvToast.toast(t,{title:e,variant:i,toaster:"b-toaster-top-center",solid:!0})},confirmBox:function(e,t,i,s,n,a){var r=this;this.$bvModal.msgBoxConfirm(this.$t(e,{town:n}),{hideHeaderClose:!1,centered:!0,cancelVariant:"danger",okVariant:"primary",okTitle:this.$t("general.yes"),cancelTitle:this.$t("general.no")}).then((function(e){console.log(e),e&&r.sendUpdateRegionAction(t,i,s,a)})).catch((function(e){console.log(err)}))},sendUpdateRegionAction:function(e,t,i,s){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log(e,t,i,s),r.next=3,n.$api.post("companyAdress/putCompanyAdress",Object(a["a"])(Object(a["a"])({},i),{},{id:t,companyId:n.company.id}));case 3:o=r.sent,"OK"==o.status?(n.toast(n.$t("alertMessage.success"),n.$t("alertMessage.updateSuccess"),"success"),n.setUpdateRegion({index:e,companyIndex:n.i,data:Object(a["a"])(Object(a["a"])({},s),i)}),n.successMultiActions++):"REGISTERED"==o.status?n.toast(n.$t("alertMessage.error"),n.$t("alertMessage.registeredRegion"),"danger"):n.toast(n.$t("alertMessage.error"),n.$t("alertMessage.error500"),"danger");case 5:case"end":return r.stop()}}),r)})))()},setUpdateRegion:function(e){var t=this;this.isLoading=!0,this.$store.commit("setUpdateRegion",e),this.editItem={status:!1,index:-1},setTimeout((function(){t.isLoading=!1}),500)},setEditItem:function(e){var t=this;console.log(e),this.editItem={status:!0,index:e.index,data:e.item},setTimeout((function(){t.$bvModal.show("edit-regions-"+t.i)}),250)},rowClass:function(e,t){return console.log(e,t),1==e.isOnline?"online-region":"offline-region"},setMainRegions:function(){this.allMainRegions=[];var e=K(this.company.addresses.data,"town");for(var t in this.allMainRegions.push({regionFilter:!1,mainRegion:this.$t("regions.chooseAllRegions"),type:"isActive",data:1,items:[]}),e)this.allMainRegions.push({regionFilter:!0,mainRegion:t,type:"isActive",data:1,items:e[t]})},initCompanyAddress:function(e,t){var i=this;this.isLoading=!0,this.$api.post("companyAdress/getCompanyAdress",{companyId:this.company.id}).then((function(e){"OK"==e.status?(i.$store.commit("setCompanyAddress",{data:e.data,index:i.i}),i.isLoading=!1):i.isLoading=!1}))}},mounted:function(){this.company.addresses.status||-1==this.i?(this.isLoading=!1,this.setMainRegions()):this.initCompanyAddress()}},G=H,V=(i("71d9"),Object(w["a"])(G,r,o,!1,null,null,null)),J=V.exports,W=i("2f62"),Q={computed:Object(a["a"])({},Object(W["c"])(["currentCompanies"])),components:{TableRegion:J,RegionModal:I},data:function(){return{inserted:!1}}},X=Q,Y=Object(w["a"])(X,s,n,!1,null,null,null);t["default"]=Y.exports}}]);