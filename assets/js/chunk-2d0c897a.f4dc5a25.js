(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c897a"],{5614:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("piaf-breadcrumb"),t._v(" "),a("b-tabs",t._l(t.currentCompanies,(function(t,e){return a("b-tab",{key:e,attrs:{title:t.name}},[a("b-card",{staticClass:"rounded-0"},[a("TableRegion",{attrs:{company:t,i:e}})],1)],1)})),1)],1)},r=[],i=a("5530"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.company.workers.isLoading?a("div",{staticClass:"inner"},[a("div",{staticClass:"loading"})]):t.errorWorkers.status?a("div",{staticClass:"text-center w-100"},[t._v("\n    "+t._s(t.errorWorkers.text)+"\n  ")]):t._e(),t._v(" "),a("div"),t._v(" "),a("b-row",[a("b-colxx",{attrs:{cols:"12"}},[a("div",{staticClass:"top-right-button-container"},[a("NewAdd",{attrs:{company:t.company,i:t.i},on:{success:function(e){return t.initWorkers(1,10)}}}),t._v(" "),a("Edit",{attrs:{editWorker:t.editWorker,company:t.company,i:t.i},on:{success:function(e){return t.initWorkers(1,10)}}}),t._v(" "),a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-add-worker",modifiers:{"new-add-worker":!0}}],staticClass:"top-right-button",attrs:{variant:"primary",size:"lg"}},[t._v(t._s(t.$t("workers.newWorkers")))]),t._v(" "),a("b-button-group",[a("b-dropdown",{staticClass:"check-button",attrs:{split:"",right:"",variant:"primary"},on:{click:function(e){return t.selectAll(!0)}}},[a("label",{staticClass:"custom-control custom-checkbox pl-4 mb-0 d-inline-block",attrs:{slot:"button-content"},slot:"button-content"},[a("input",{directives:[{name:"shortkey",rawName:"v-shortkey",value:{select:["ctrl","a"],undo:["ctrl","d"],space:["space"]},expression:"{ select: ['ctrl', 'a'], undo: ['ctrl', 'd'], space: ['space'] }"}],staticClass:"custom-control-input",attrs:{type:"checkbox"},domProps:{checked:t.isSelectedAll},on:{shortkey:t.keymap}}),t._v(" "),a("span",{class:{"custom-control-label":!0,indeterminate:t.isAnyItemSelected}},[t._v("Â ")])]),t._v(" "),a("b-dropdown-item",{attrs:{disabled:0==t.selectedItems.length},on:{click:function(e){return t.onConfirm(1)}}},[t._v(t._s(t.$t("workers.multiDoActive",{length:t.selectedItems.length})))]),t._v(" "),a("b-dropdown-item",{attrs:{disabled:0==t.selectedItems.length},on:{click:function(e){return t.onConfirm(0)}}},[t._v(t._s(t.$t("workers.multiDoOffline",{length:t.selectedItems.length})))])],1)],1)],1)]),t._v(" "),a("b-row",[a("b-colxx",[a("div",{staticClass:"mb-4"},[a("b-button-group",{attrs:{variant:"outline-primary",size:"xs"}},[a("b-button",{attrs:{size:"xs",variant:-1==t.filter.show?"primary":"outline-primary"},on:{click:function(e){t.filter.show=-1}}},[t._v(t._s(t.$t("workers.showAll")))]),t._v(" "),a("b-button",{attrs:{size:"xs",variant:1==t.filter.show?"primary":"outline-primary"},on:{click:function(e){t.filter.show=1}}},[t._v(t._s(t.$t("workers.showOnline")))]),t._v(" "),a("b-button",{attrs:{size:"xs",variant:0==t.filter.show?"primary":"outline-primary"},on:{click:function(e){t.filter.show=0}}},[t._v(t._s(t.$t("workers.showOffline")))])],1)],1)])],1),t._v(" "),t.company.workers.isLoading?t._e():a("b-colxx",{attrs:{xxs:"12"}},[a("b-card",[t._l(t.filterWorkers,(function(e,s){return a("CardList",{key:s,staticClass:"my-4",attrs:{paymentIndex:s,selectedItems:t.selectedItems,data:e,company:t.company,i:t.i},on:{"toggle-item":t.toggleItem,edit:t.setEditWorker}})})),t._v(" "),0==t.filterWorkers.length?a("div",{staticClass:"text-center"},[t._v("\n        "+t._s(t.$t("error.empty"))+"\n      ")]):t._e()],2)],1)],1),t._v(" "),a("v-contextmenu",{ref:"contextmenu"},[a("v-contextmenu-item",{on:{click:function(e){return t.onContextMenuAction("copy")}}},[a("i",{staticClass:"simple-icon-docs"}),t._v(" "),a("span",[t._v("Copy")])]),t._v(" "),a("v-contextmenu-item",{on:{click:function(e){return t.onContextMenuAction("move-to-archive")}}},[a("i",{staticClass:"simple-icon-drawer"}),t._v(" "),a("span",[t._v("Move to archive")])]),t._v(" "),a("v-contextmenu-item",{on:{click:function(e){return t.onContextMenuAction("delete")}}},[a("i",{staticClass:"simple-icon-trash"}),t._v(" "),a("span",[t._v("Delete")])])],1),t._v(" "),a("b-modal",{attrs:{id:"multi-action-update","hide-header":"","no-close-on-backdrop":"","hide-footer":"",centered:""}},[t.multiUpdateLoading?a("div",{staticClass:"inner"},[a("div",{staticClass:"loading"})]):a("div",{staticClass:"text-center"},[a("i",{staticClass:"simple-icon-check text-success",staticStyle:{"font-size":"32px"}})]),t._v(" "),a("div",{staticClass:"text-center"},[t._v("\n      "+t._s(t.$t("workers.multiActionProcessing",{success:t.successMultiActions,length:t.selectedItems.length}))+"\n    ")]),t._v(" "),a("div",{staticClass:"mt-4 text-center"},[a("small",[t._v(t._s(t.$t("alertMessage.autoCloseActionProcess")))])])])],1)},n=[],l=a("2909"),c=a("1da1"),d=(a("96cf"),a("4de4"),a("d81d"),a("fb6a"),a("caad"),a("2532"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-card",{class:{"d-flex flex-row":!0,active:t.selectedItems.includes(t.data.id)},attrs:{"no-body":""},on:{click:function(e){return e.preventDefault(),t.toggleItem(e,t.data.id)}}},[a("div",{staticClass:"d-flex text-white w-10 align-items-center justify-content-center",class:{"bg-success":1==t.data.isActive,"bg-danger":0==t.data.isActive},staticStyle:{"border-radius":"5px"}},[a("h1",{staticClass:"p-0 m-0"},[t._v(t._s(t.returnName))])]),t._v(" "),a("list-actions",{attrs:{paymentIndex:t.paymentIndex,company:t.company,i:t.i,selectedItems:t.selectedItems,data:t.data},on:{edit:function(e){return t.$emit("edit",e)}}})],1)}),u=[],m=(a("b0c0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pl-2 d-flex flex-grow-1 min-width-zero"},[a("div",{staticClass:"card-body align-self-center d-flex flex-column flex-lg-row justify-content-between min-width-zero align-items-lg-center"},[a("div",{staticClass:"w-30 w-sm-100"},[a("p",{staticClass:"list-item-heading mb-0 truncate"},[t._v(t._s(t.data.name)+" "+t._s(t.data.lastname)+"\n              "),1==t.data.isManager?a("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"iconsminds-king-2",attrs:{title:t.$t("workers.isManager")}}):t._e(),t._v(" "),1==t.data.isStaff?a("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"iconsminds-male-female",attrs:{title:t.$t("workers.isStaff")}}):t._e()])]),t._v(" "),a("div",{staticClass:"w-25 w-sm-100"},[a("div",[t._v(t._s(t.$t("workers.phone")))]),t._v("\n              "+t._s(t.data.phone)+"\n          ")]),t._v(" "),a("div",{staticClass:"w-25 w-sm-100"},[a("div",[t._v(t._s(t.$t("workers.email")))]),t._v("\n              "+t._s(t.data.email)+"\n          ")]),t._v(" "),a("div",{staticClass:"w-25 w-sm-100"},[a("div",[t._v(t._s(t.$t("workers.createdAt")))]),t._v("\n              "+t._s(t.dataFormatterNaApiWithTime(t.data.createdAt))+"\n          ")]),t._v(" "),a("div",{staticClass:"w-15 w-sm-100"},[a("dropdown-actions",{attrs:{"payment-index":t.paymentIndex,company:t.company,i:t.i,data:t.data},on:{edit:function(e){return t.$emit("edit",e)}}})],1)]),t._v(" "),a("div",{staticClass:"custom-control custom-checkbox pl-1 align-self-center pr-4"},[a("b-form-checkbox",{staticClass:"itemCheck mb-0",attrs:{checked:t.selectedItems.includes(t.data.id)}})],1)])}),v=[],p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-dropdown",{staticClass:"m-md-2",attrs:{size:t.size?t.size:"md",id:"dropdown-1",text:t.$t("pages.actions")}},[a("b-dropdown-item",{on:{click:function(e){return t.$emit("edit",t.data)}}},[t._v(t._s(t.$t("general.edit")))]),t._v(" "),a("b-dropdown-item",{attrs:{variant:1==t.data.isActive?"danger":"success"},on:{click:function(e){return t.setItem("circle","isActive",t.data.isActive,"oldIsActive",1==t.data.isActive?0:1)}}},[t._v(" "+t._s(t.$t("general."+(1==t.data.isActive?"remove":"doActive"))))])],1),t._v(" "),t.show?a("div",[a("b-modal",{attrs:{"ok-disabled":t.alert.status||t.isLoading,"ok-title":t.isLoading?t.$t("general.isLoading"):t.$t("general.update"),"cancel-title":t.$t("general.close"),"ok-variant":"warning",title:t.$t("workers.updateWorkers"),id:"product-update",centered:""},on:{ok:t.setUpdateProduct,hidden:function(e){t.show=!1}}},[a("div",{staticClass:"text-center"},[1==t.updateData.isActive?a("strong",{domProps:{innerHTML:t._s(t.$t("workers.isActiveDescription1"))}}):a("strong",{domProps:{innerHTML:t._s(t.$t("workers.isActiveDescription0"))}})])])],1):t._e()],1)},h=[],f=a("ade3"),k={props:["data","company","i","paymentIndex","size"],data:function(){return{isLoading:!1,show:!1,inc:[],dec:[],updateData:{val:"TL",type:"price",oldType:"oldPrice",price:this.data.price,oldPrice:this.data.price,discount:this.data.discount,oldDiscount:this.data.discount,isActive:this.data.isActive,oldIsActive:this.data.isActive},alert:{status:!1,text:""}}},watch:{"updateData.discount":function(t){this.alert=t<0?{status:!0,text:this.$t("products.alert.mustBeUp0Discount")}:t>100?{status:!0,text:this.$t("products.alert.mustBeDown100Discount")}:{status:!1}},"updateData.price":function(t){this.alert=t<0?{status:!0,text:this.$t("products.alert.mustBeUp0Price")}:{status:!1}}},methods:{toast:function(t,e,a){this.counter++,this.$bvToast.toast(e,{title:t,variant:a,toaster:"b-toaster-top-center",solid:!0})},apiResponse:function(t,e){"OK"==t.status?(this.$bvModal.hide("product-update"),this.$emit("successUpdate",e),this.$store.commit("setUpdateWorkers",{data:e,index:this.i,paymentIndex:this.paymentIndex,toast:{func:this.$bvToast,data:{title:this.$t("alertMessage.success"),content:this.$t("alertMessage.updateSuccess"),variant:"success"}}})):"REGISTERED"==t.status?this.toast(this.$t("alertMessage.error"),this.$t("alertMessage.registered"),"danger"):this.toast(this.$t("alertMessage.error"),this.$t("alertMessage.error500"),"danger")},setUpdateProduct:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var s,r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.isLoading=!0,t.preventDefault(),s={},Object(f["a"])(s,e.updateData.type,e.updateData[e.updateData.type]),Object(f["a"])(s,"id",e.data.id),r=s,"isActive"!=e.updateData.type){a.next=11;break}return console.log(r),a.next=7,e.$api.post("user/putUser",r);case 7:i=a.sent,e.apiResponse(i,r),a.next=12;break;case 11:e.alert={status:!0,text:e.$t("error.empty")};case 12:e.isLoading=!1;case 13:case"end":return a.stop()}}),a)})))()},setFastlyDiscount:function(){this.inc=[{count:5,text:this.$t("products.increment",{data:"5 ".concat(this.updateData.val)})},{count:10,text:this.$t("products.increment",{data:"10 ".concat(this.updateData.val)})},{count:20,text:this.$t("products.increment",{data:"20 ".concat(this.updateData.val)})},{count:25,text:this.$t("products.increment",{data:"25 ".concat(this.updateData.val)})}],this.dec=[{count:5,text:this.$t("products.decrement",{data:"5 ".concat(this.updateData.val)})},{count:10,text:this.$t("products.decrement",{data:"10 ".concat(this.updateData.val)})},{count:20,text:this.$t("products.decrement",{data:"20 ".concat(this.updateData.val)})},{count:25,text:this.$t("products.decrement",{data:"25 ".concat(this.updateData.val)})}]},setFastlyPrice:function(){this.inc=[{count:.5,text:this.$t("products.increment",{data:"0.50 ".concat(this.updateData.val)})},{count:1,text:this.$t("products.increment",{data:"1 ".concat(this.updateData.val)})},{count:2,text:this.$t("products.increment",{data:"2 ".concat(this.updateData.val)})},{count:2.5,text:this.$t("products.increment",{data:"2.5 ".concat(this.updateData.val)})}],this.dec=[{count:.5,text:this.$t("products.decrement",{data:"0.50 ".concat(this.updateData.val)})},{count:1,text:this.$t("products.decrement",{data:"1 ".concat(this.updateData.val)})},{count:2,text:this.$t("products.decrement",{data:"2 ".concat(this.updateData.val)})},{count:2.5,text:this.$t("products.decrement",{data:"2.5 ".concat(this.updateData.val)})}]},setItem:function(t,e,a,s,r){var i=this;this.alert={status:!1},this.updateData.type=e,this.updateData.val=t,this.updateData.oldType=s,"discount"==e?this.setFastlyDiscount():this.setFastlyPrice(),this.show=!0,setTimeout((function(){i.updateData[s]=a,i.updateData[e]="isActive"==e?r:a,i.$bvModal.show("product-update")}),250)}}},b=k,$=a("2877"),w=Object($["a"])(b,p,h,!1,null,null,null),g=w.exports,_=a("7869"),x={components:{DropdownActions:g},props:["data","selectedItems","company","i","paymentIndex"],methods:{dataFormatterNaApiWithTime:_["a"]}},y=x,L=Object($["a"])(y,m,v,!1,null,null,null),C=L.exports,M={components:{listActions:C},computed:{returnName:function(){return this.data.name.charAt(0).toLocaleUpperCase()+this.data.lastname.charAt(0).toLocaleUpperCase()}},props:["data","selectedItems","company","i","paymentIndex"],data:function(){return{isLoading:!0}},methods:{toggleItem:function(t,e){console.log("here",t,e),this.$emit("toggle-item",t,e)}}},I=M,D=Object($["a"])(I,d,u,!1,null,null,null),A=D.exports,W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{attrs:{id:"new-add-worker","no-close-on-backdrop":"","ok-title-html":t.isLoading?"<span class='spinner-border spinner-border-sm'></span>":t.$t("general.submit"),"ok-disabled":t.isLoading,"cancel-variant":"danger","cancel-title":t.$t("general.close"),title:t.$t("workers.newWorkers")},on:{ok:t.sendNewWorker}},[a("div",[a("b-row",[a("b-colxx",{attrs:{sm:"12",lg:"6"}},[a("b-form-group",{staticClass:"has-float-label mb-4",attrs:{label:t.$t("workers.name")}},[a("b-form-input",{attrs:{type:"text",state:!t.$v.worker.name.$error},model:{value:t.$v.worker.name.$model,callback:function(e){t.$set(t.$v.worker.name,"$model",e)},expression:"$v.worker.name.$model"}}),t._v(" "),t.$v.worker.name.required?t.$v.worker.name.maxLength?t._e():a("b-form-invalid-feedback",[t._v(t._s(t.$t("validation.maxLength",{title:t.$t("workers.name"),length:30})))]):a("b-form-invalid-feedback",[t._v(t._s(t.$t("validation.required")))])],1)],1),t._v(" "),a("b-colxx",{attrs:{sm:"12",lg:"6"}},[a("b-form-group",{staticClass:"has-float-label mb-4",attrs:{label:t.$t("workers.lastname")}},[a("b-form-input",{attrs:{type:"text",state:!t.$v.worker.lastname.$error},model:{value:t.$v.worker.lastname.$model,callback:function(e){t.$set(t.$v.worker.lastname,"$model",e)},expression:"$v.worker.lastname.$model"}}),t._v(" "),t.$v.worker.lastname.required?t.$v.worker.lastname.maxLength?t._e():a("b-form-invalid-feedback",[t._v(t._s(t.$t("validation.maxLength",{title:t.$t("workers.lastname"),length:30})))]):a("b-form-invalid-feedback",[t._v(t._s(t.$t("validation.required")))])],1)],1)],1),t._v(" "),a("b-row",[a("b-colxx",{attrs:{sm:"12",lg:"6"}},[a("b-form-group",{staticClass:"has-float-label mb-4",attrs:{label:t.$t("workers.phone")}},[a("b-form-input",{attrs:{type:"number",state:!t.$v.worker.phone.$error},model:{value:t.$v.worker.phone.$model,callback:function(e){t.$set(t.$v.worker.phone,"$model",t._n(e))},expression:"$v.worker.phone.$model"}}),t._v(" "),t.$v.worker.phone.required?t.$v.worker.phone.maxLength&&t.$v.worker.phone.minLength?t._e():a("b-form-invalid-feedback",[t._v(t._s(t.$t("validation.maxLength",{title:t.$t("workers.phone"),length:10})))]):a("b-form-invalid-feedback",[t._v(t._s(t.$t("validation.required")))]),t._v(" "),t.invalidPhone?a("b-form-invalid-feedback",[t._v(t._s(t.$t("validation.alreadyExistPhone")))]):t._e()],1)],1)],1),t._v(" "),a("b-row",[a("b-colxx",{attrs:{sm:"12",lg:"6"}},[a("b-form-group",{staticClass:"has-float-label mb-4",attrs:{label:t.$t("workers.email")}},[a("b-form-input",{attrs:{type:"text",state:!t.$v.worker.email.$error},model:{value:t.$v.worker.email.$model,callback:function(e){t.$set(t.$v.worker.email,"$model",e)},expression:"$v.worker.email.$model"}}),t._v(" "),t.$v.worker.email.required?t.$v.worker.email.email?t._e():a("b-form-invalid-feedback",[t._v(t._s(t.$t("validation.email")))]):a("b-form-invalid-feedback",[t._v(t._s(t.$t("validation.required")))]),t._v(" "),t.invalidEmail?a("b-form-invalid-feedback",[t._v(t._s(t.$t("validation.alreadyExistEmail")))]):t._e()],1)],1),t._v(" "),a("b-colxx",{attrs:{sm:"12",lg:"6"}},[a("b-form-group",{staticClass:"has-float-label mb-4",attrs:{label:t.$t("user.password")}},[a("b-form-input",{attrs:{type:"text",state:!t.$v.worker.password.$error},model:{value:t.$v.worker.password.$model,callback:function(e){t.$set(t.$v.worker.password,"$model",e)},expression:"$v.worker.password.$model"}}),t._v(" "),t.$v.worker.password.required?t.$v.worker.password.maxLength?t.$v.worker.password.minLength?t._e():a("b-form-invalid-feedback",[t._v(t._s(t.$t("validation.minLength",{title:t.$t("user.password"),length:4})))]):a("b-form-invalid-feedback",[t._v(t._s(t.$t("validation.maxLength",{title:t.$t("user.password"),length:16})))]):a("b-form-invalid-feedback",[t._v(t._s(t.$t("validation.required")))])],1)],1)],1),t._v(" "),a("b-row",[a("b-form-group",{attrs:{label:t.$t("workers.authStatus")},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.ariaDescribedby;return[a("b-form-radio",{attrs:{"aria-describedby":s,name:"some-radios",value:1},on:{change:function(e){t.worker.isStaff=0}},model:{value:t.worker.isManager,callback:function(e){t.$set(t.worker,"isManager",e)},expression:"worker.isManager"}},[t._v(t._s(t.$t("workers.isManager")))]),t._v(" "),a("b-form-radio",{attrs:{"aria-describedby":s,name:"some-radios",value:1},on:{change:function(e){t.worker.isManager=0}},model:{value:t.worker.isStaff,callback:function(e){t.$set(t.worker,"isStaff",e)},expression:"worker.isStaff"}},[t._v(t._s(t.$t("workers.isStaff")))])]}}])}),t._v(" "),a("div",{staticClass:"mt-4"},[a("p",[t._v(t._s(t.$t("workers.authStatusDescription")))]),t._v(" "),a("p",[t._v(t._s(t.$t("workers.authStatusDescription1")))])])],1)],1)])},E=[],S=a("1dce"),O=a("b5ae"),q=O.required,R=O.maxLength,P=O.minLength,j=O.email,T={mixins:[S["validationMixin"]],validations:{worker:{name:{required:q,maxLength:R(30)},lastname:{required:q,maxLength:R(30)},email:{required:q,email:j},phone:{required:q,maxLength:R(10),minLength:P(10)},password:{required:q,maxLength:R(16),minLength:P(4)}}},props:{company:{default:function(){}},i:{default:-1}},data:function(){return{isLoading:!1,invalidPhone:!1,invalidEmail:!1,worker:{name:"",lastname:"",email:"",phone:"",password:"",isManager:0,isStaff:1}}},methods:{toast:function(t,e,a){this.$bvToast.toast(e,{title:t,variant:a,toaster:"b-toaster-top-center",solid:!0})},sendNewWorker:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.isLoading=!0,t.preventDefault(),e.$v.worker.$touch(),e.$v.worker.$anyError){a.next=8;break}return a.next=6,e.$api.post("createUser",Object(i["a"])(Object(i["a"])({},e.worker),{},{companyId:e.company.id}));case 6:s=a.sent,"OK"==s.status?(e.toast(e.$t("alertMessage.success"),e.$t("alertMessage.insertSuccess"),"success"),e.$emit("success"),e.$bvModal.hide("new-add-worker")):"REGISTERED"==s.status?e.toast(e.$t("alertMessage.error"),e.$t("alertMessage.registered"),"danger"):"ERRORMAILORPHONE"==s.status?e.toast(e.$t("alertMessage.error"),e.$t("alertMessage.errormailorphone"),"danger"):e.toast(e.$t("alertMessage.error"),e.$t("alertMessage.error500"),"danger");case 8:console.log("worked"),e.isLoading=!1;case 10:case"end":return a.stop()}}),a)})))()}}},U=T,N=Object($["a"])(U,W,E,!1,null,null,null),z=N.exports,F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{attrs:{id:"edit-worker","no-close-on-backdrop":"","ok-title-html":t.isLoading?"<span class='spinner-border spinner-border-sm'></span>":t.$t("general.submit"),"ok-disabled":t.isLoading,"cancel-variant":"danger","cancel-title":t.$t("general.close"),title:t.$t("workers.updateWorkers")},on:{show:t.setEditWorker,ok:t.sendNewWorker}},[a("div",[a("b-row",[a("b-colxx",{attrs:{sm:"12",lg:"6"}},[a("b-form-group",{staticClass:"has-float-label mb-4",attrs:{label:t.$t("workers.name")}},[a("b-form-input",{attrs:{type:"text",state:!t.$v.worker.name.$error},model:{value:t.$v.worker.name.$model,callback:function(e){t.$set(t.$v.worker.name,"$model",e)},expression:"$v.worker.name.$model"}}),t._v(" "),t.$v.worker.name.required?t.$v.worker.name.maxLength?t._e():a("b-form-invalid-feedback",[t._v(t._s(t.$t("validation.maxLength",{title:t.$t("workers.name"),length:30})))]):a("b-form-invalid-feedback",[t._v(t._s(t.$t("validation.required")))])],1)],1),t._v(" "),a("b-colxx",{attrs:{sm:"12",lg:"6"}},[a("b-form-group",{staticClass:"has-float-label mb-4",attrs:{label:t.$t("workers.lastname")}},[a("b-form-input",{attrs:{type:"text",state:!t.$v.worker.lastname.$error},model:{value:t.$v.worker.lastname.$model,callback:function(e){t.$set(t.$v.worker.lastname,"$model",e)},expression:"$v.worker.lastname.$model"}}),t._v(" "),t.$v.worker.lastname.required?t.$v.worker.lastname.maxLength?t._e():a("b-form-invalid-feedback",[t._v(t._s(t.$t("validation.maxLength",{title:t.$t("workers.lastname"),length:30})))]):a("b-form-invalid-feedback",[t._v(t._s(t.$t("validation.required")))])],1)],1)],1),t._v(" "),a("b-row",[a("b-colxx",{attrs:{sm:"12",lg:"6"}},[a("b-form-group",{staticClass:"has-float-label mb-4",attrs:{label:t.$t("workers.phone")}},[a("b-form-input",{attrs:{type:"number",state:!t.$v.worker.phone.$error},model:{value:t.$v.worker.phone.$model,callback:function(e){t.$set(t.$v.worker.phone,"$model",t._n(e))},expression:"$v.worker.phone.$model"}}),t._v(" "),t.$v.worker.phone.required?t.$v.worker.phone.maxLength&&t.$v.worker.phone.minLength?t._e():a("b-form-invalid-feedback",[t._v(t._s(t.$t("validation.maxLength",{title:t.$t("workers.phone"),length:10})))]):a("b-form-invalid-feedback",[t._v(t._s(t.$t("validation.required")))]),t._v(" "),t.invalidPhone?a("b-form-invalid-feedback",[t._v(t._s(t.$t("validation.alreadyExistPhone")))]):t._e()],1)],1)],1),t._v(" "),a("b-row",[a("b-colxx",{attrs:{sm:"12",lg:"6"}},[a("b-form-group",{staticClass:"has-float-label mb-4",attrs:{label:t.$t("workers.email")}},[a("b-form-input",{attrs:{type:"text",state:!t.$v.worker.email.$error},model:{value:t.$v.worker.email.$model,callback:function(e){t.$set(t.$v.worker.email,"$model",e)},expression:"$v.worker.email.$model"}}),t._v(" "),t.$v.worker.email.required?t.$v.worker.email.email?t._e():a("b-form-invalid-feedback",[t._v(t._s(t.$t("validation.email")))]):a("b-form-invalid-feedback",[t._v(t._s(t.$t("validation.required")))]),t._v(" "),t.invalidEmail?a("b-form-invalid-feedback",[t._v(t._s(t.$t("validation.alreadyExistEmail")))]):t._e()],1)],1)],1),t._v(" "),a("b-row",[a("b-form-group",{attrs:{label:t.$t("workers.authStatus")},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.ariaDescribedby;return[a("b-form-radio",{attrs:{"aria-describedby":s,name:"some-radios",value:1},on:{change:function(e){t.worker.isStaff=0}},model:{value:t.worker.isManager,callback:function(e){t.$set(t.worker,"isManager",e)},expression:"worker.isManager"}},[t._v(t._s(t.$t("workers.isManager")))]),t._v(" "),a("b-form-radio",{attrs:{"aria-describedby":s,name:"some-radios",value:1},on:{change:function(e){t.worker.isManager=0}},model:{value:t.worker.isStaff,callback:function(e){t.$set(t.worker,"isStaff",e)},expression:"worker.isStaff"}},[t._v(t._s(t.$t("workers.isStaff")))])]}}])}),t._v(" "),a("div",{staticClass:"mt-4"},[a("p",[t._v(t._s(t.$t("workers.authStatusDescription")))]),t._v(" "),a("p",[t._v(t._s(t.$t("workers.authStatusDescription1")))])])],1)],1)])},K=[],H=a("b5ae"),B=H.required,G=H.maxLength,J=H.minLength,V=H.email,Q={mixins:[S["validationMixin"]],validations:{worker:{name:{required:B,maxLength:G(30)},lastname:{required:B,maxLength:G(30)},email:{required:B,email:V},phone:{required:B,maxLength:G(10),minLength:J(10)}}},props:{company:{default:function(){}},i:{default:-1},editWorker:{default:function(){return{name:"",lastname:"",email:"",phone:"",password:"",isManager:0,isStaff:1}}}},data:function(){return{isLoading:!1,invalidPhone:!1,invalidEmail:!1,worker:{name:"",lastname:"",email:"",phone:"",password:"",isManager:0,isStaff:1}}},methods:{setEditWorker:function(){console.log("eeeee",this.editWorker),this.worker=Object(i["a"])({},this.editWorker)},toast:function(t,e,a){this.$bvToast.toast(e,{title:t,variant:a,toaster:"b-toaster-top-center",solid:!0})},sendNewWorker:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.isLoading=!0,t.preventDefault(),e.$v.worker.$touch(),e.$v.worker.$anyError){a.next=8;break}return a.next=6,e.$api.post("user/putUserGeneral",Object(i["a"])(Object(i["a"])({},e.worker),{},{id:e.worker.userId,companyId:e.company.id}));case 6:s=a.sent,"OK"==s.status?(e.toast(e.$t("alertMessage.success"),e.$t("alertMessage.insertSuccess"),"success"),e.$emit("success"),e.$bvModal.hide("new-add-worker")):"REGISTERED"==s.status?e.toast(e.$t("alertMessage.error"),e.$t("alertMessage.registered"),"danger"):"ERRORMAILORPHONE"==s.status?e.toast(e.$t("alertMessage.error"),e.$t("alertMessage.errormailorphone"),"danger"):e.toast(e.$t("alertMessage.error"),e.$t("alertMessage.error500"),"danger");case 8:console.log("worked"),e.isLoading=!1;case 10:case"end":return a.stop()}}),a)})))()}}},X=Q,Y=Object($["a"])(X,F,K,!1,null,null,null),Z=Y.exports,tt={components:{CardList:A,NewAdd:z,Edit:Z},computed:{filterWorkers:function(){var t=this;return-1==this.filter.show?this.company.workers.data:this.company.workers.data.filter((function(e){return e.isActive==t.filter.show}))},isSelectedAll:function(){return this.selectedItems.length>=this.company.workers.data.length},isAnyItemSelected:function(){return this.selectedItems.length>0&&this.selectedItems.length<this.company.workers.data.length}},props:{company:{default:function(){}},i:{default:-1}},watch:{"company.workers.isLoading":function(t){t||(this.filter.show=-1)}},data:function(){return{editWorker:null,multiUpdateLoading:!1,successMultiActions:0,filter:{show:-1},selectedItems:[],errorWorkers:{status:!1,text:this.$t("error.empty")},isLoading:!0,pageCount:1,items:[],fields:[{key:"name",label:this.$t("Workers.type"),sortable:!0},{key:"description",label:this.$t("Workers.description"),sortable:!0},{key:"isActive",label:this.$t("Workers.status")},{key:"action",label:this.$t("Workers.action")}]}},methods:{setEditWorker:function(t){var e=this;this.editWorker=t,setTimeout((function(){e.$bvModal.show("edit-worker")}),250)},onConfirm:function(t){var e=this,a=this.$createElement,s=a("div",{domProps:{innerHTML:this.$t("workers.isActiveDescription".concat(t))}});this.$bvModal.msgBoxConfirm(s,{size:"md",buttonSize:"sm",okVariant:"warning",cancelVariant:"danger",okTitle:this.$t("general.submit"),cancelTitle:this.$t("general.close"),footerClass:"p-2",hideFooter:!0,hideHeader:!0,centered:!0}).then((function(a){a&&e.multiPaymentProcess(t)}))},multiPaymentProcess:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var s,r,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.successMultiActions=0,e.multiUpdateLoading=!0,e.$bvModal.show("multi-action-update"),s=0;case 4:if(!(s<e.selectedItems.length)){a.next=15;break}return r=e.selectedItems[s],i={id:r,isActive:t},a.next=9,e.updateWorkers(i);case 9:o=a.sent,"OK"==o.status&&(e.$store.commit("setUpdateWorkers",{data:i,index:e.i,toast:{func:e.$bvToast,data:{title:e.$t("alertMessage.success"),content:e.$t("alertMessage.updateSuccess"),variant:"success"}}}),e.successMultiActions++),e.selectedItems.length-1==s&&(e.multiUpdateLoading=!1,setTimeout((function(){e.$bvModal.hide("multi-action-update")}),3500));case 12:s++,a.next=4;break;case 15:case"end":return a.stop()}}),a)})))()},updateWorkers:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$api.post("user/putUser",t);case 2:return s=a.sent,a.abrupt("return",s);case 4:case"end":return a.stop()}}),a)})))()},selectAll:function(t){this.selectedItems.length>=this.filterWorkers.length?t&&(this.selectedItems=[]):this.selectedItems=this.filterWorkers.map((function(t){return t.id}))},keymap:function(t){switch(console.log(t),t.srcKey){case"select":this.selectAll(!1);break;case"undo":this.selectedItems=[];break;case"space":0!=this.selectedItems.length&&this.onConfirm(1);break}},toggleItem:function(t,e){if(console.log("worked"),t.shiftKey&&this.selectedItems.length>0){var a,s=this.filterWorkers,r=this.getIndex(e,s,"id"),i=this.getIndex(this.selectedItems[this.selectedItems.length-1],s,"id");s=s.slice(Math.min(r,i),Math.max(r,i)+1),(a=this.selectedItems).push.apply(a,Object(l["a"])(s.map((function(t){return t.id}))))}else this.selectedItems.includes(e)?this.selectedItems=this.selectedItems.filter((function(t){return t!==e})):this.selectedItems.push(e)},initWorkers:function(t,e){var a=this;this.$store.commit("setWorkers",{isLoading:!0,index:this.i}),this.$api.post("company/getCompanyUsers",{limit:e,offset:t,companyId:this.company.id}).then((function(t){"OK"==t.status?(a.pageCount=Math.ceil(t.data[0].total/10),console.log(t),a.$store.commit("setWorkers",{index:a.i,data:t.data})):(a.errorWorkers,a.$t("error.empty")),a.isLoading=!1}))}},mounted:function(){this.company.workers.status||-1==this.i?this.isLoading=!1:this.initWorkers()}},et=tt,at=Object($["a"])(et,o,n,!1,null,null,null),st=at.exports,rt=a("2f62"),it={computed:Object(i["a"])({},Object(rt["c"])(["currentCompanies"])),components:{TableRegion:st}},ot=it,nt=Object($["a"])(ot,s,r,!1,null,null,null);e["default"]=nt.exports}}]);