(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e2321"],{"7e52":function(t,n,o){"use strict";o.r(n);var e=function(){var t=this,n=t.$createElement,o=t._self._c||n;return o("div",[o("b-tabs",t._l(t.currentCompanies,(function(t,n){return o("b-tab",{key:n,attrs:{title:t.name}},[o("Comments",{attrs:{company:t,i:n}})],1)})),1)],1)},a=[],m=o("5530"),s=function(){var t=this,n=t.$createElement,o=t._self._c||n;return o("b-card",{staticClass:"mb-4 rounded-0",attrs:{id:"comment-card",title:t.$t("comments.title",{company:t.company.name,count:t.count})}},[t.errorComments.status?o("div",{staticClass:"text-center py-4"},[t._v("\n    "+t._s(t.errorComments.text)+"\n  ")]):o("div",[o("b-row",t._l(t.company.comments.data,(function(t,n){return o("b-colxx",{key:n,attrs:{xs:"12",lg:"6"}},[o("b-card",{staticClass:"mb-4"},[o("comment-item",{attrs:{data:t,"detail-path":"#"}})],1)],1)})),1)],1),t._v(" "),t.isLoading?o("div",{staticClass:"inner"},[o("div",{staticClass:"loading"})]):t._e(),t._v(" "),t.company.comments.data.length==t.count?o("div",{staticClass:"my-4 text-center"},[t._v("\n    Tüm yorumları görüntülüyorsunuz..\n    "),o("br"),t._v("\n    ("+t._s(t.count)+" - "+t._s(t.company.comments.data.length)+")\n  ")]):t._e()])},c=[],i=o("7090"),r=(o("1fc2"),{components:{CommentItem:i["a"]},data:function(){return{comments:[],isLoading:!0,count:0,errorComments:{status:!1}}},props:{company:{default:function(){}},i:{default:-1}},methods:{initCompany:function(t,n){var o=this;this.isLoading=!0,this.$api.nts("getComments",{companyId:this.company.id,limit:n,offset:t}).then((function(n){"OK"==n.status?(o.$store.commit("setComments",{index:o.i,data:n.data,page:t,total:n.data[0].total}),o.count=n.data[0].total):(o.$store.commit("setComments",{index:o.i,data:[],page:t,total:o.company.comments.total}),o.errorComments={status:!0,text:o.$t("error.empty")},o.count=0),o.isLoading=!1}))}},mounted:function(){this.company.comments.status?(this.isLoading=!1,this.count=this.company.comments.total):this.initCompany(this.company.comments.page,10);var t=this;window.onscroll=function(n){if(console.log(n),window.innerHeight+window.scrollY>=document.body.offsetHeight&&!t.isLoading&&t.company.comments.data.length!=t.count){var o=1;t.company.comments.data.length<10&&t.count!=t.company.comments.data.length?o=1:10==t.company.comments.data.length&&t.count!=t.company.comments.data.length?o=Math.floor(t.company.comments.data.length/10)+1:t.company.comments.data.length>10&&t.count!=t.company.comments.data.length&&(o=Math.floor(t.company.comments.data.length/10)),console.log(t.company.comments.data.length,t.count,o),t.initCompany(o,10)}},console.log(document.body.offsetHeight,window.innerHeight),document.body.offsetHeight<window.innerHeight&&this.company.comments.data.length<10&&this.initCompany(1,10)}}),l=r,d=o("2877"),u=Object(d["a"])(l,s,c,!1,null,null,null),p=u.exports,h=o("2f62"),y={computed:Object(m["a"])({},Object(h["c"])(["currentCompanies"])),components:{Comments:p}},g=y,f=Object(d["a"])(g,e,a,!1,null,null,null);n["default"]=f.exports}}]);