(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d237aa3"],{fba2:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("piaf-breadcrumb"),t._v(" "),s("b-tabs",t._l(t.currentCompanies,(function(t,e){return s("b-tab",{key:e,attrs:{title:t.name}},[s("b-card",{staticClass:"rounded-0"},[s("TableRegion",{attrs:{company:t,i:e}})],1)],1)})),1)],1)},n=[],i=s("5530"),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.company.bannedUsers.isLoading?s("div",{staticClass:"inner"},[s("div",{staticClass:"loading"})]):t.errorBannedUsers.status?s("div",{staticClass:"text-center w-100"},[t._v("\n    "+t._s(t.errorBannedUsers.text)+"\n  ")]):t._e(),t._v(" "),s("div"),t._v(" "),s("b-row",[s("b-colxx",{attrs:{cols:"12"}},[s("div",{staticClass:"top-right-button-container"},[s("b-button-group",[s("b-dropdown",{staticClass:"check-button",attrs:{split:"",right:"",variant:"primary"},on:{click:function(e){return t.selectAll(!0)}}},[s("label",{staticClass:"custom-control custom-checkbox pl-4 mb-0 d-inline-block",attrs:{slot:"button-content"},slot:"button-content"},[s("input",{directives:[{name:"shortkey",rawName:"v-shortkey",value:{select:["ctrl","a"],undo:["ctrl","d"],space:["space"]},expression:"{ select: ['ctrl', 'a'], undo: ['ctrl', 'd'], space: ['space'] }"}],staticClass:"custom-control-input",attrs:{type:"checkbox"},domProps:{checked:t.isSelectedAll},on:{shortkey:t.keymap}}),t._v(" "),s("span",{class:{"custom-control-label":!0,indeterminate:t.isAnyItemSelected}},[t._v("Â ")])]),t._v(" "),s("b-dropdown-item",{attrs:{disabled:0==t.selectedItems.length},on:{click:function(e){return t.onConfirm(1)}}},[t._v(t._s(t.$t("bannedUser.multiDoActive",{length:t.selectedItems.length})))]),t._v(" "),s("b-dropdown-item",{attrs:{disabled:0==t.selectedItems.length},on:{click:function(e){return t.onConfirm(0)}}},[t._v(t._s(t.$t("bannedUser.multiDoOffline",{length:t.selectedItems.length})))])],1)],1)],1)]),t._v(" "),s("b-row",[s("b-colxx",[s("div",{staticClass:"mb-4"},[s("b-button-group",{attrs:{variant:"outline-primary",size:"xs"}},[s("b-button",{attrs:{size:"xs",variant:-1==t.filter.show?"primary":"outline-primary"},on:{click:function(e){t.filter.show=-1}}},[t._v(t._s(t.$t("bannedUser.showAll")))]),t._v(" "),s("b-button",{attrs:{size:"xs",variant:1==t.filter.show?"primary":"outline-primary"},on:{click:function(e){t.filter.show=1}}},[t._v(t._s(t.$t("bannedUser.showOnline")))]),t._v(" "),s("b-button",{attrs:{size:"xs",variant:0==t.filter.show?"primary":"outline-primary"},on:{click:function(e){t.filter.show=0}}},[t._v(t._s(t.$t("bannedUser.showOffline")))])],1)],1)])],1),t._v(" "),t.company.bannedUsers.isLoading?t._e():s("b-colxx",{attrs:{xxs:"12"}},[s("b-card",[t._l(t.filterBannedUsers,(function(e,a){return s("CardList",{key:a,staticClass:"my-4",attrs:{paymentIndex:a,selectedItems:t.selectedItems,data:e,company:t.company,i:t.i},on:{"toggle-item":t.toggleItem}})})),t._v(" "),0==t.filterBannedUsers.length?s("div",{staticClass:"text-center"},[t._v("\n        "+t._s(t.$t("error.empty"))+"\n      ")]):t._e()],2)],1)],1),t._v(" "),s("v-contextmenu",{ref:"contextmenu"},[s("v-contextmenu-item",{on:{click:function(e){return t.onContextMenuAction("copy")}}},[s("i",{staticClass:"simple-icon-docs"}),t._v(" "),s("span",[t._v("Copy")])]),t._v(" "),s("v-contextmenu-item",{on:{click:function(e){return t.onContextMenuAction("move-to-archive")}}},[s("i",{staticClass:"simple-icon-drawer"}),t._v(" "),s("span",[t._v("Move to archive")])]),t._v(" "),s("v-contextmenu-item",{on:{click:function(e){return t.onContextMenuAction("delete")}}},[s("i",{staticClass:"simple-icon-trash"}),t._v(" "),s("span",[t._v("Delete")])])],1),t._v(" "),s("b-modal",{attrs:{id:"multi-action-update","hide-header":"","no-close-on-backdrop":"","hide-footer":"",centered:""}},[t.multiUpdateLoading?s("div",{staticClass:"inner"},[s("div",{staticClass:"loading"})]):s("div",{staticClass:"text-center"},[s("i",{staticClass:"simple-icon-check text-success",staticStyle:{"font-size":"32px"}})]),t._v(" "),s("div",{staticClass:"text-center"},[t._v("\n      "+t._s(t.$t("bannedUser.multiActionProcessing",{success:t.successMultiActions,length:t.selectedItems.length}))+"\n    ")]),t._v(" "),s("div",{staticClass:"mt-4 text-center"},[s("small",[t._v(t._s(t.$t("alertMessage.autoCloseActionProcess")))])])])],1)},o=[],r=s("2909"),d=s("1da1"),l=(s("96cf"),s("4de4"),s("d81d"),s("fb6a"),s("caad"),s("2532"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-card",{class:{"d-flex flex-row":!0,active:t.selectedItems.includes(t.data.id)},attrs:{"no-body":""},on:{click:function(e){return e.preventDefault(),t.toggleItem(e,t.data.id)}}},[s("div",{staticClass:"d-flex text-white w-10 align-items-center justify-content-center",class:{"bg-success":0==t.data.isActive,"bg-danger":1==t.data.isActive},staticStyle:{"border-radius":"5px"}},[s("h1",{staticClass:"p-0 m-0"},[s("i",{staticClass:"iconsminds-firewall"})])]),t._v(" "),s("list-actions",{attrs:{paymentIndex:t.paymentIndex,company:t.company,i:t.i,selectedItems:t.selectedItems,data:t.data}})],1)}),u=[],p=(s("b0c0"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pl-2 d-flex flex-grow-1 min-width-zero"},[s("div",{staticClass:"card-body align-self-center d-flex flex-column flex-lg-row justify-content-between min-width-zero align-items-lg-center"},[s("div",{staticClass:"w-30 w-sm-100",attrs:{to:"/app/products/"+t.data.id}},[s("p",{staticClass:"list-item-heading mb-0 truncate"},[t._v(t._s(t.data.name)+" "+t._s(t.data.lastname))])]),t._v(" "),s("div",{staticClass:"w-25 w-sm-100"},[t._v("\n              "+t._s(t.data.reason)+"\n          ")]),t._v(" "),s("div",{staticClass:"w-25 w-sm-100"},[s("b-badge",{attrs:{variant:0==t.data.isActive?"outline-success":"outline-danger"}},[t._v(" "+t._s(1==t.data.isActive?t.$t("bannedUser.cantGiveOrder"):t.$t("bannedUser.canGiveOrder")))])],1),t._v(" "),s("div",{staticClass:"w-15 w-sm-100"},[s("dropdown-actions",{attrs:{"payment-index":t.paymentIndex,company:t.company,i:t.i,data:t.data}})],1)]),t._v(" "),s("div",{staticClass:"custom-control custom-checkbox pl-1 align-self-center pr-4"},[s("b-form-checkbox",{staticClass:"itemCheck mb-0",attrs:{checked:t.selectedItems.includes(t.data.id)}})],1)])}),m=[],h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-button",{attrs:{variant:1==t.data.isActive?"danger":"success"},on:{click:function(e){return t.setItem("circle","isActive",t.data.isActive,"oldIsActive",1==t.data.isActive?0:1)}}},[t._v(" "+t._s(t.$t("general."+(1==t.data.isActive?"remove":"doActive"))))]),t._v(" "),t.show?s("div",[s("b-modal",{attrs:{"ok-disabled":t.alert.status||t.isLoading,"ok-title":t.isLoading?t.$t("general.isLoading"):t.$t("general.update"),"cancel-title":t.$t("general.close"),"ok-variant":"warning",title:t.$t("bannedUser.updateBannedUser"),id:"product-update",centered:""},on:{ok:t.setUpdateProduct,hidden:function(e){t.show=!1}}},[s("div",{staticClass:"text-center"},[1==t.updateData.isActive?s("strong",{domProps:{innerHTML:t._s(t.$t("bannedUser.isActiveDescription1"))}}):s("strong",{domProps:{innerHTML:t._s(t.$t("bannedUser.isActiveDescription0"))}})])])],1):t._e()],1)},v=[],f=s("ade3"),b={props:["data","company","i","paymentIndex","size"],data:function(){return{isLoading:!1,show:!1,inc:[],dec:[],updateData:{val:"TL",type:"price",oldType:"oldPrice",price:this.data.price,oldPrice:this.data.price,discount:this.data.discount,oldDiscount:this.data.discount,isActive:this.data.isActive,oldIsActive:this.data.isActive},alert:{status:!1,text:""}}},watch:{"updateData.discount":function(t){this.alert=t<0?{status:!0,text:this.$t("products.alert.mustBeUp0Discount")}:t>100?{status:!0,text:this.$t("products.alert.mustBeDown100Discount")}:{status:!1}},"updateData.price":function(t){this.alert=t<0?{status:!0,text:this.$t("products.alert.mustBeUp0Price")}:{status:!1}}},methods:{toast:function(t,e,s){this.counter++,this.$bvToast.toast(e,{title:t,variant:s,toaster:"b-toaster-top-center",solid:!0})},apiResponse:function(t,e){"OK"==t.status?(this.$bvModal.hide("product-update"),this.$emit("successUpdate",e),this.$store.commit("setUpdateBlockedUsers",{data:e,index:this.i,paymentIndex:this.paymentIndex,toast:{func:this.$bvToast,data:{title:this.$t("alertMessage.success"),content:this.$t("alertMessage.updateSuccess"),variant:"success"}}})):"REGISTERED"==t.status?this.toast(this.$t("alertMessage.error"),this.$t("alertMessage.registered"),"danger"):this.toast(this.$t("alertMessage.error"),this.$t("alertMessage.error500"),"danger")},setUpdateProduct:function(t){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function s(){var a,n,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(e.isLoading=!0,t.preventDefault(),a={},Object(f["a"])(a,e.updateData.type,e.updateData[e.updateData.type]),Object(f["a"])(a,"id",e.data.id),n=a,"isActive"!=e.updateData.type){s.next=11;break}return console.log(n),s.next=7,e.$api.post("block/putBlock",n);case 7:i=s.sent,e.apiResponse(i,n),s.next=12;break;case 11:e.alert={status:!0,text:e.$t("error.empty")};case 12:e.isLoading=!1;case 13:case"end":return s.stop()}}),s)})))()},setFastlyDiscount:function(){this.inc=[{count:5,text:this.$t("products.increment",{data:"5 ".concat(this.updateData.val)})},{count:10,text:this.$t("products.increment",{data:"10 ".concat(this.updateData.val)})},{count:20,text:this.$t("products.increment",{data:"20 ".concat(this.updateData.val)})},{count:25,text:this.$t("products.increment",{data:"25 ".concat(this.updateData.val)})}],this.dec=[{count:5,text:this.$t("products.decrement",{data:"5 ".concat(this.updateData.val)})},{count:10,text:this.$t("products.decrement",{data:"10 ".concat(this.updateData.val)})},{count:20,text:this.$t("products.decrement",{data:"20 ".concat(this.updateData.val)})},{count:25,text:this.$t("products.decrement",{data:"25 ".concat(this.updateData.val)})}]},setFastlyPrice:function(){this.inc=[{count:.5,text:this.$t("products.increment",{data:"0.50 ".concat(this.updateData.val)})},{count:1,text:this.$t("products.increment",{data:"1 ".concat(this.updateData.val)})},{count:2,text:this.$t("products.increment",{data:"2 ".concat(this.updateData.val)})},{count:2.5,text:this.$t("products.increment",{data:"2.5 ".concat(this.updateData.val)})}],this.dec=[{count:.5,text:this.$t("products.decrement",{data:"0.50 ".concat(this.updateData.val)})},{count:1,text:this.$t("products.decrement",{data:"1 ".concat(this.updateData.val)})},{count:2,text:this.$t("products.decrement",{data:"2 ".concat(this.updateData.val)})},{count:2.5,text:this.$t("products.decrement",{data:"2.5 ".concat(this.updateData.val)})}]},setItem:function(t,e,s,a,n){var i=this;this.alert={status:!1},this.updateData.type=e,this.updateData.val=t,this.updateData.oldType=a,"discount"==e?this.setFastlyDiscount():this.setFastlyPrice(),this.show=!0,setTimeout((function(){i.updateData[a]=s,i.updateData[e]="isActive"==e?n:s,i.$bvModal.show("product-update")}),250)}}},g=b,x=s("2877"),y=Object(x["a"])(g,h,v,!1,null,null,null),$=y.exports,_={components:{DropdownActions:$},props:["data","selectedItems","company","i","paymentIndex"]},w=_,k=Object(x["a"])(w,p,m,!1,null,null,null),I=k.exports,U={components:{listActions:I},computed:{returnName:function(){return this.data.name.charAt(0).toLocaleUpperCase()}},props:["data","selectedItems","company","i","paymentIndex"],data:function(){return{isLoading:!0}},methods:{toggleItem:function(t,e){console.log("here",t,e),this.$emit("toggle-item",t,e)}}},C=U,A=Object(x["a"])(C,l,u,!1,null,null,null),D=A.exports,B={components:{CardList:D},computed:{filterBannedUsers:function(){var t=this;return-1==this.filter.show?this.company.bannedUsers.data:this.company.bannedUsers.data.filter((function(e){return e.isActive==t.filter.show}))},isSelectedAll:function(){return this.selectedItems.length>=this.company.bannedUsers.data.length},isAnyItemSelected:function(){return this.selectedItems.length>0&&this.selectedItems.length<this.company.bannedUsers.data.length}},props:{company:{default:function(){}},i:{default:-1}},watch:{"company.bannedUsers.isLoading":function(t){t||(this.filter.show=-1)}},data:function(){return{multiUpdateLoading:!1,successMultiActions:0,filter:{show:-1},selectedItems:[],errorBannedUsers:{status:!1,text:this.$t("error.empty")},isLoading:!0,pageCount:1,items:[],fields:[{key:"name",label:this.$t("BannedUsers.type"),sortable:!0},{key:"description",label:this.$t("BannedUsers.description"),sortable:!0},{key:"isActive",label:this.$t("BannedUsers.status")},{key:"action",label:this.$t("BannedUsers.action")}]}},methods:{onConfirm:function(t){var e=this,s=this.$createElement,a=s("div",{domProps:{innerHTML:this.$t("bannedUser.isActiveDescription".concat(t))}});this.$bvModal.msgBoxConfirm(a,{size:"md",buttonSize:"sm",okVariant:"warning",cancelVariant:"danger",okTitle:this.$t("general.submit"),cancelTitle:this.$t("general.close"),footerClass:"p-2",hideFooter:!0,hideHeader:!0,centered:!0}).then((function(s){s&&e.multiPaymentProcess(t)}))},multiPaymentProcess:function(t){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function s(){var a,n,i,c;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:e.successMultiActions=0,e.multiUpdateLoading=!0,e.$bvModal.show("multi-action-update"),a=0;case 4:if(!(a<e.selectedItems.length)){s.next=15;break}return n=e.selectedItems[a],i={id:n,isActive:t},s.next=9,e.updateBannedUsers(i);case 9:c=s.sent,"OK"==c.status&&(e.$store.commit("setUpdateBlockedUsers",{data:i,index:e.i,toast:{func:e.$bvToast,data:{title:e.$t("alertMessage.success"),content:e.$t("alertMessage.updateSuccess"),variant:"success"}}}),e.successMultiActions++),e.selectedItems.length-1==a&&(e.multiUpdateLoading=!1,setTimeout((function(){e.$bvModal.hide("multi-action-update")}),3500));case 12:a++,s.next=4;break;case 15:case"end":return s.stop()}}),s)})))()},updateBannedUsers:function(t){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,e.$api.post("block/putBlock",t);case 2:return a=s.sent,s.abrupt("return",a);case 4:case"end":return s.stop()}}),s)})))()},selectAll:function(t){this.selectedItems.length>=this.filterBannedUsers.length?t&&(this.selectedItems=[]):this.selectedItems=this.filterBannedUsers.map((function(t){return t.id}))},keymap:function(t){switch(console.log(t),t.srcKey){case"select":this.selectAll(!1);break;case"undo":this.selectedItems=[];break;case"space":0!=this.selectedItems.length&&this.onConfirm(1);break}},toggleItem:function(t,e){if(console.log("worked"),t.shiftKey&&this.selectedItems.length>0){var s,a=this.filterBannedUsers,n=this.getIndex(e,a,"id"),i=this.getIndex(this.selectedItems[this.selectedItems.length-1],a,"id");a=a.slice(Math.min(n,i),Math.max(n,i)+1),(s=this.selectedItems).push.apply(s,Object(r["a"])(a.map((function(t){return t.id}))))}else this.selectedItems.includes(e)?this.selectedItems=this.selectedItems.filter((function(t){return t!==e})):this.selectedItems.push(e)},initBannedUsers:function(t,e){var s=this;this.$store.commit("setBannedUsers",{isLoading:!0,index:this.i}),this.$api.post("company/getBlockUser",{limit:e,offset:t,companyId:this.company.id}).then((function(t){"OK"==t.status?(s.pageCount=Math.ceil(t.data[0].total/10),console.log(t),s.$store.commit("setBannedUsers",{index:s.i,data:t.data})):(s.errorBannedUsers,s.$t("error.empty")),s.isLoading=!1}))}},mounted:function(){this.company.bannedUsers.status||-1==this.i?this.isLoading=!1:this.initBannedUsers()}},M=B,L=Object(x["a"])(M,c,o,!1,null,null,null),O=L.exports,P=s("2f62"),T={computed:Object(i["a"])({},Object(P["c"])(["currentCompanies"])),components:{TableRegion:O}},j=T,R=Object(x["a"])(j,a,n,!1,null,null,null);e["default"]=R.exports}}]);